@using BackOffice.Translates
@model BackOffice.Areas.Users.Models.EditUserDialogViewModel

@{
    Layout = "~/Views/Shared/_PersonalAreaDialog.cshtml";
}

<form id="frmEditUser">
    <table style="width:100%">
        <tr>
            <td>
                @if (string.IsNullOrEmpty(Model.User.Id))
                {
                    <div class="form-group">
                        <label class="control-label">Email:</label>
                        <input id="id" name="Id" class="form-control setCursor input-lg" placeholder="@Phrases.EmailAtLykke" value="@Model.User.Id" />
                    </div>

                    <input name="Create" value="1" type="hidden"/>
                }
                else
                {
                    <input name="Id" value="@Model.User.Id" type="hidden" />
                    <span>@Model.User.Id</span>
                }

                <div class="form-group">
                    <label class="control-label">@Phrases.FullName:</label>
                    <input id="fullName" name="FullName" class="form-control input-lg" placeholder="@Phrases.FullName" value="@Model.User.FullName" />
                </div>

                @if (Model.User.IsAdmin)
                {
                    <input type="checkbox" name="IsAdminChecked" checked="checked" />
                }
                else
                {
                    <input type="checkbox" name="IsAdminChecked" />
                }<span>Admin</span>
                <br/>
                @if (Model.User.UseTwoFactorVerification)
                {
                    <input type="checkbox" name="UseTwoFactorVerificationChecked" checked="checked" />
                }
                else
                {
                    <input type="checkbox" name="UseTwoFactorVerificationChecked" />
                }<span>Use two factor authentication</span>
                <br />
                @if (Model.User.HasGoogleAuthenticator)
                {
                    <input type="checkbox" name="HasGoogleAuthenticatorChecked" checked="checked" />
                }
                else
                {
                    <input type="checkbox" name="HasGoogleAuthenticatorChecked" />
                }<span>Binded with Google Authenticator</span>
                
                @Html.RenderInputWithLabelOnTop("TwoFactorVerificationTrustedTimeSpan", Phrases.TrustedTimeSpan,
                    Model.User.TwoFactorVerificationTrustedTimeSpan, Phrases.TrustedTimeSpanPlaceholder)
            </td>
            <td>
                @Html.RenderMultiselect(Phrases.Roles, "Roles", Model.Roles.Select(role => new KeyValuePair<string, string>(role.Key, role.Value.Name)), Model.User.Roles)
            </td>
        </tr>
    </table>
</form>

@Html.RenderSaveCancelButtonPair(Url.Action("EditUser"), "#frmEditUser")

